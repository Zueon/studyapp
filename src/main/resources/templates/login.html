<!DOCTYPE html>
<html lang="en" xmlns:th = "http://www.thymeleaf.org">
<head th:replace="fragments.html :: head"></head>
<body class="bg-light">
<div th:replace="fragments.html::navigation-bar"></div>
<div class="container">
  <div class="py-5 text-center">
    <p class="lead">Webluxible</p>
    <h2>Login</h2>
  </div>
  <div class="row justify-content-center">
<!--    error라는 파라미터 존재 시 아래 화면을 보여준다-->
    <div th:if="${param.error}" class="ui-icon-alert alert-danger" role="alert">
      <p class="text-center">로그인 정보가 정확하지 않습니다.</p>
      <p class="text-center"><a href="#" th:href="@{/find-password}">패스워드 찾기</a></p>
    </div>

<!--    이 때 호출하는 /login은 스프링 시큐리티가 제공하는 /login이 호출된다. 따라서 따로 로그인 핸들러 구현할 필요 없으나, username, password처럼 스프링
        시큐리티가 구현한 로그인 핸들러에서 사용하는 변수 이름은 동일하게 설정해줘야한다. -->
    <form action="#" class="needs-validation col-sm-6" th:action="@{/login}" method="POST" novalidate>
      <div class="form-group">
        <label for="username">이메일 또는 닉네임</label>
        <input type="text" id="username" name="username" class="form-control" placeholder="your@email.com" aria-describedby="emailHelp" required>
        <small id="emailHelp" class="form-text text-muted">가입할 때 사용한 이메일 또는 닉네임을 입력하세요</small>
        <small class="invalid-feedback">이메일을 입력하세요.</small>
      </div>

      <div class="form-group">
        <label for="password">패스워드</label>
        <input id="password" type="password" name="password" class="form-control"
               aria-describedby="passwordHelp" required>
        <small id="passwordHelp" class="form-text text-muted">
          패스워드가 기억나지 않으시나요? <a href="#" th:href="@{/email-login}">이메일로 로그인하기</a>
        </small>
        <small class="invalid-feedback">패스워드를 입력하세요.</small>
      </div>

      <div class="form-group">
        <button class="btn btn-success btn-block" type="submit" aria-describedby="submitHelp">로그인</button>
        <small id="submitHelp" class="form-text text-muted">
          아직 회원이 아니신가요? <a href="#" th:href="@{/signup}">가입하기</a>
        </small>
      </div>
    </form>
  </div>
  <div th:replace="fragments::footer"></div>
</div>
<script th:replace="fragments::form-validation"></script>
</body>

</html>